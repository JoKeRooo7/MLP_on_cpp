
## Считывание из файла.

Так как `.csv` файлы достаточно огромны по длинне строк и их количеству, была необходимость эффективно доставать данные, без использования огромнго количества памяти.

Считывания файла ,из за недостака объема памяти, происходит в отдельном потоке, по строчно.
Был создан буфер, который принимает в себя ограниченное количество строк. Само считывание при использовании большего количество строк - ставится на паузу, и ждет, пока буфер не будет меньше, чем предельное количество записей в него.
 

Считывание происходить в файле `csv_reader.h` и `csv_reader.cc` и был реализован объект - `CSVReader`


### class CSVReader

- `USInt response_time_ = 5;` - время ожидания в секундах (нужно для того, чтобы обрывать поток, если изменения в буфере не происходит больше 5 секунд).
- `Buffer<DataFormat> buffer_` - сам буфер.

- `std::mutex buffer_mutex_` - мьютекс для синхронизации доступа к буферу.
- `std::condition_variable buffer_cv_` - условная переменная для ожидания доступа к буферу.
- `std::thread read_thread_;` - сам поток.

Класс принимает название в `LoadFile()` - проверяет расширение и отправляет чтение файла в поток.
Поток октрывается для `ProcessReadFile()`. Он считывает строку, помещает ее в буфер, если буфер переполнен, ждет, пока он снова не будет меньше заданного размера, затем поток продожает свое действие.


### class Buffer

Шаблонный класс, принимает тип данных ,который будет храниться в очереди.

- `void SetMaxBufferSize(USInt size)` - принимает максимальное количество хранимых элементов в очереди.
- `void SetData(const TypeData& var);` - принимает данные.
- `void Open();` - разрешает запись в буфер.
- `void Close();` - запрещает запись в буфер.
- `void Clear();` - очищает буфер.
- `bool IsOpen();` - возращает `true`, если буфер открыт.
- `bool IsClose();` - обратное `IsOpen();`.
- `USInt GetMaxBufferSize();` - возращает макимальный размер хранения в буфере.
- `std::size_t GetSize();` - возращает текущий разрмер буфера.
- `std::queue<TypeData> GetData();` - получает всю очередь с данными.
- `TypeData TakeElement();` - удаляет элемент из очереди, возращая его копию.

